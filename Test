# PRD Section
$clients = "MPMD"
$prdUsedSpace = @{}  # Create a hashtable to store PRD used space values

foreach ($client in $clients) {
    $server = "ptlprddb$client" + "01.chicago.local"
    $disk = Get-WmiObject Win32_logicaldisk -ComputerName $server -Filter "DeviceID='G:'"
    $usedGB = [decimal]($disk.Size / 1gb - $disk.FreeSpace / 1gb)
    $prdUsedSpace[$client] = $usedGB  # Store used space in the hashtable
}

# UAT Section
$uatTotalSpace = @{}  # Create a hashtable to store UAT total space values

foreach ($client in $clients) {
    $server = "ptlpsdb$client" + "01.chicago.local"
    $disk = Get-WmiObject Win32_logicaldisk -ComputerName $server -Filter "DeviceID='G:'"
    $sizeGB = [decimal]($disk.Size / 1gb)
    $uatTotalSpace[$client] = $sizeGB  # Store total space in the hashtable
}

# Create a plain text table
$table = @()
$table += "Client`tDrive ID`tSpace Needed (GB)"

# Compare PRD and UAT and add rows to the table only when space is needed
foreach ($client in $clients) {
    $difference = $prdUsedSpace[$client] - $uatTotalSpace[$client]
    if ($difference -gt 0) {
        $table += "$client`tG:`t$difference"
    }
}

# Output the plain text table
if ($table.Count -gt 1) {
    $table | Format-Table -AutoSize | Out-String | Write-Host
}
