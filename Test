# Define an array of server names
$servers =  'ALDUATDBBHAR01.CHICAGO.LOCAL','ALDUATDBBHAR01.CHICAGO.LOCAL','ALDUATDBBHME01.CHICAGO.LOCAL','ALDUATDBMPMD01.CHICAGO.LOCAL','ALDUATDBSMNY01.CHICAGO.LOCAL','ALDUATDBLWWA01.CHICAGO.LOCAL','ALDUATDBBRIF01.CHICAGO.LOCAL','ALDUATDBPHKY01.CHICAGO.LOCAL','ALDUATDBCCHHS01.CHICAGO.LOCAL','ALDUATDBNMHC01.CHICAGO.LOCAL','ALDUATDBNPA01.CHICAGO.LOCAL','ALDUATDBCMIL01.CHICAGO.LOCAL','ALDUATDBMABR01.CHICAGO.LOCAL','ALDUATDBMAMC01.CHICAGO.LOCAL','ALDUATDBPMAK01.CHICAGO.LOCAL','ALDUATDBPMWA01.CHICAGO.LOCAL'
# Define the number of days after which the files should be deleted
$days = 59

# Calculate the date range
$endDate = Get-Date
$startDate = $endDate.AddDays(-$days)

# Function to write colored text to the console
function Write-ColoredText {
    param (
        [string]$text,
        [string]$color
    )
    
    Write-Host $text -ForegroundColor $color
}

# Loop through each server in the array
foreach ($server in $servers) {
    Write-ColoredText "Processing server: $server" "Yellow"
    Write-ColoredText "Deleting files from $($startDate.ToString('yyyy-MM-dd')) to $($endDate.ToString('yyyy-MM-dd'))" "Yellow"
    
    # Use Invoke-Command to run the script block on the remote server
    Invoke-Command -ComputerName $server -ScriptBlock {
        # ... (rest of the script remains the same)
    }
}
